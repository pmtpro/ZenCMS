function htmlspecialchars(str) {
    if (typeof(str) == "string") {
        str = str.replace(/&/g, "&amp;"); /* must do &amp; first */
        str = str.replace(/"/g, "&quot;");
        str = str.replace(/'/g, "&#039;");
        str = str.replace(/</g, "&lt;");
        str = str.replace(/>/g, "&gt;");
    }
    return str;
}

tinymce.PluginManager.add("textarea", function (e) {
    function t() {
        e.windowManager.open({title: "Thêm hộp văn bản", body: {type: "textbox", name: "textarea", multiline: !0, minWidth: 600, minHeight: 200, value: "", spellcheck: !1}, onSubmit: function (t) {
            e.insertContent("\n<textarea class=\"textarea_box\">" + htmlspecialchars(t.data.textarea) + "</textarea>")
        }})
    }
    e.addButton("textarea", {icon: "textarea", tooltip: "Thêm hộp văn bản", onclick: t})
});